const link=document.createElement("link");link.rel="stylesheet",link.type="text/css",link.href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css",document.head.appendChild(link);const link2=document.createElement("link");link2.rel="preconnect",link2.href="https://fonts.googleapis.com",document.head.appendChild(link2);const link3=document.createElement("link");link3.rel="preconnect",link3.href="https://fonts.gstatic.com",document.head.appendChild(link3);const link4=document.createElement("link");link4.rel="stylesheet",link4.href="https://fonts.googleapis.com/css2?family=Barlow:wght@800&family=Cabin:wght@500&family=Montserrat:wght@600&family=Noto+Sans&family=Poppins&family=Roboto:wght@500&family=Space+Grotesk:wght@700&family=Varela+Round&display=swap",document.head.appendChild(link4);const link5=document.createElement("link");link5.rel="stylesheet",link5.type="text/css",link5.href="https://gitloaf.com/cdn/albibos/carbon-windows/main/window.min.css",document.head.appendChild(link5);class Carbon{constructor(e){this.name=e.name,this.id=e.id,this.type=e.type,this.url=e.url,this.html=e.html,this.width=e.width+"px",this.height=e.height+"px",this.parent=e.parent||null,this.createWindow(),this.addEventListeners()}createWindow(){this.windowElement=document.createElement("div"),this.windowElement.className="window",this.windowElement.style.width=this.width,this.windowElement.style.height=this.height,this.windowElement.id=this.id;let e=document.createElement("div");e.className="title-bar";let t=document.createElement("div");t.className="title",t.innerText=this.name;let i=document.createElement("div");i.className="buttons",i.innerHTML=`
            <i class="fa-regular fa-window-minimize"></i>
            <i class="fa-regular fa-window-maximize"></i>
            <i class="fa-solid fa-xmark"></i>
        `;let s=document.createElement("div");if(s.className="content",e.appendChild(t),e.appendChild(i),this.windowElement.appendChild(e),this.windowElement.appendChild(s),this.parent?document.getElementById(this.parent).appendChild(this.windowElement):(document.body.appendChild(this.windowElement),this.centerWindow()),"html"===this.type)s.innerHTML=this.html;else if("iframe"===this.type){let n=document.createElement("iframe");n.src=this.url,n.style.width="100%",n.style.height="100%",s.appendChild(n)}}centerWindow(){this.windowElement.style.position="fixed",this.windowElement.style.left="50%",this.windowElement.style.top="50%",this.windowElement.style.transform="translate(-50%, -50%)"}addEventListeners(){let e=this.windowElement.querySelector(".title-bar"),t=this.windowElement.querySelector(".fa-window-minimize"),i=this.windowElement.querySelector(".fa-window-maximize"),s=this.windowElement.querySelector(".fa-xmark");this.windowElement.querySelector(".content");let n=!1;e.addEventListener("mousedown",e=>{n||this.dragStart(e)}),t.addEventListener("click",()=>{this.windowElement.style.display="none"}),i.addEventListener("click",()=>{if(n)this.windowElement.style.width=this.width,this.windowElement.style.height=this.height,this.windowElement.classList.remove("fullscreen"),e.style.cursor="grab",n=!1;else{let t=this.windowElement.style.left,i=this.windowElement.style.top;this.windowElement.style.width="100%",this.windowElement.style.height="100%",this.windowElement.classList.add("fullscreen"),e.style.cursor="auto",n=!0,this.windowElement.style.left="50%",this.windowElement.style.top="50%",this.windowElement.style.transform="translate(-50%, -50%)",this.windowElement.dataset.originalLeft=t,this.windowElement.dataset.originalTop=i}}),s.addEventListener("click",()=>{this.windowElement.remove()}),[{className:"resize-handle top",cursor:"ns-resize",direction:"top"},{className:"resize-handle bottom",cursor:"ns-resize",direction:"bottom"},{className:"resize-handle left",cursor:"ew-resize",direction:"left"},{className:"resize-handle right",cursor:"ew-resize",direction:"right"},{className:"resize-handle top-left",cursor:"nwse-resize",direction:"top-left"},{className:"resize-handle top-right",cursor:"nesw-resize",direction:"top-right"},{className:"resize-handle bottom-left",cursor:"nesw-resize",direction:"bottom-left"},{className:"resize-handle bottom-right",cursor:"nwse-resize",direction:"bottom-right"},].forEach(e=>{let t=document.createElement("div");t.className=e.className,t.style.cursor=e.cursor,this.windowElement.appendChild(t),t.addEventListener("mousedown",t=>{n||this.resizeStart(t,e.direction)})}),resizeHandleBottom.addEventListener("mousedown",e=>{n||this.resizeStart(e,"bottom")}),resizeHandleLeft.addEventListener("mousedown",e=>{n||this.resizeStart(e,"left")}),resizeHandleRight.addEventListener("mousedown",e=>{n||this.resizeStart(e,"right")}),resizeHandleTop.addEventListener("mousedown",e=>{n||this.resizeStart(e,"top")}),resizeHandleTopLeft.addEventListener("mousedown",e=>{n||this.resizeStart(e,"top-left")}),resizeHandleTopRight.addEventListener("mousedown",e=>{n||this.resizeStart(e,"top-right")}),resizeHandleBottomLeft.addEventListener("mousedown",e=>{n||this.resizeStart(e,"bottom-left")}),resizeHandleBottomRight.addEventListener("mousedown",e=>{n||this.resizeStart(e,"bottom-right")})}dragStart(e){let t=e.clientX,i=e.clientY,s=this.windowElement.offsetLeft,n=this.windowElement.offsetTop,l=e=>{let l=e.clientX-t,o=e.clientY-i;this.windowElement.style.left=s+l+"px",this.windowElement.style.top=n+o+"px"},o=()=>{window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",o),this.windowElement.style.cursor="grab"};window.addEventListener("mousemove",l),window.addEventListener("mouseup",o),this.windowElement.style.cursor="grabbing"}resizeStart(e,t){let i=e.clientX,s=e.clientY,n=this.windowElement.offsetWidth,l=this.windowElement.offsetHeight,o=e=>{let o=e.clientX-i,r=e.clientY-s,d=n,a=l;t.includes("right")&&(d=n+o),t.includes("bottom")&&(a=l+r),t.includes("left")&&(d=n-o),t.includes("top")&&(a=l-r),d=Math.max(d,100),a=Math.max(a,100),this.windowElement.style.width=d+"px",this.windowElement.style.height=a+"px"},r=()=>{window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",r)};window.addEventListener("mousemove",o),window.addEventListener("mouseup",r)}}
