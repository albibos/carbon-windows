const link=document.createElement("link");link.rel="stylesheet",link.type="text/css",link.href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css",document.head.appendChild(link);const link2=document.createElement("link");link2.rel="preconnect",link2.href="https://fonts.googleapis.com",document.head.appendChild(link2);const link3=document.createElement("link");link3.rel="preconnect",link3.href="https://fonts.gstatic.com",document.head.appendChild(link3);const link4=document.createElement("link");link4.rel="stylesheet",link4.href="https://fonts.googleapis.com/css2?family=Barlow:wght@800&family=Cabin:wght@500&family=Montserrat:wght@600&family=Noto+Sans&family=Poppins&family=Roboto:wght@500&family=Space+Grotesk:wght@700&family=Varela+Round&display=swap",document.head.appendChild(link4);const link5=document.createElement("link");link5.rel="stylesheet",link5.type="text/css",link5.href="https://gitloaf.com/cdn/albibos/carbon-windows/main/window.min.css",document.head.appendChild(link5);class Carbon{constructor(e){this.name=e.name,this.id=e.id,this.type=e.type,this.url=e.url,this.html=e.html,this.width=e.width+"px",this.height=e.height+"px",this.parent=e.parent||null,this.createWindow(),this.addEventListeners()}createWindow(){this.windowElement=document.createElement("div"),this.windowElement.className="window",this.windowElement.style.width=this.width,this.windowElement.style.height=this.height,this.windowElement.id=this.id;let e=document.createElement("div");e.className="title-bar";let t=document.createElement("div");t.className="title",t.innerText=this.name;let i=document.createElement("div");i.className="buttons",i.innerHTML=`
            <i class="fa-regular fa-window-minimize"></i>
            <i class="fa-regular fa-window-maximize"></i>
            <i class="fa-solid fa-xmark"></i>
        `;let n=document.createElement("div");if(n.className="content",e.appendChild(t),e.appendChild(i),this.windowElement.appendChild(e),this.windowElement.appendChild(n),this.parent?document.getElementById(this.parent).appendChild(this.windowElement):(document.body.appendChild(this.windowElement),this.centerWindow()),"html"===this.type)n.innerHTML=this.html;else if("iframe"===this.type){let l=document.createElement("iframe");l.src=this.url,l.style.width="100%",l.style.height="100%",n.appendChild(l)}}centerWindow(){this.windowElement.style.position="fixed",this.windowElement.style.left="50%",this.windowElement.style.top="50%",this.windowElement.style.transform="translate(-50%, -50%)"}addEventListeners(){let e=this.windowElement.querySelector(".title-bar"),t=this.windowElement.querySelector(".fa-window-minimize"),i=this.windowElement.querySelector(".fa-window-maximize"),n=this.windowElement.querySelector(".fa-xmark");this.windowElement.querySelector(".content");let l=document.createElement("div");l.className="resize-handle";let s=!1;e.addEventListener("mousedown",e=>{this.dragStart(e)}),t.addEventListener("click",()=>{this.windowElement.style.display="none"}),i.addEventListener("click",()=>{s?(this.windowElement.style.width=this.width,this.windowElement.style.height=this.height,this.windowElement.classList.remove("fullscreen"),e.style.cursor="grab",s=!1):(this.windowElement.style.width="100%",this.windowElement.style.height="100%",this.windowElement.classList.add("fullscreen"),e.style.cursor="auto",s=!0)}),n.addEventListener("click",()=>{this.windowElement.remove()}),l.addEventListener("mousedown",e=>{this.resizeStart(e)}),this.windowElement.appendChild(l)}dragStart(e){let t=e.clientX,i=e.clientY,n=this.windowElement.offsetLeft,l=this.windowElement.offsetTop,s=e=>{let s=e.clientX-t,d=e.clientY-i;this.windowElement.style.left=n+s+"px",this.windowElement.style.top=l+d+"px"},d=()=>{window.removeEventListener("mousemove",s),window.removeEventListener("mouseup",d),this.windowElement.style.cursor="grab"};window.addEventListener("mousemove",s),window.addEventListener("mouseup",d),this.windowElement.style.cursor="grabbing"}resizeStart(e){let t=e.clientX,i=e.clientY,n=this.windowElement.offsetWidth,l=this.windowElement.offsetHeight,s=e=>{let s=e.clientX-t,d=e.clientY-i;this.windowElement.style.width=n+s+"px",this.windowElement.style.height=l+d+"px"},d=()=>{window.removeEventListener("mousemove",s),window.removeEventListener("mouseup",d)};window.addEventListener("mousemove",s),window.addEventListener("mouseup",d)}}
