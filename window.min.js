const link=document.createElement("link");link.rel="stylesheet",link.type="text/css",link.href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css",document.head.appendChild(link);class Carbon{constructor(e){this.name=e.name,this.id=e.id,this.type=e.type,this.url=e.url,this.html=e.html,this.width=e.width+"px",this.height=e.height+"px",this.parent=e.parent||null,this.createWindow(),this.addEventListeners()}createWindow(){this.windowElement=document.createElement("div"),this.windowElement.className="window",this.windowElement.style.width=this.width,this.windowElement.style.height=this.height,this.windowElement.id=this.id;let e=document.createElement("div");e.className="title-bar";let t=document.createElement("div");t.className="title",t.innerText=this.name;let i=document.createElement("div");i.className="buttons",i.innerHTML=`
            <i class="fa-regular fa-window-minimize"></i>
            <i class="fa-regular fa-window-maximize"></i>
            <i class="fa-solid fa-xmark"></i>
        `;let n=document.createElement("div");if(n.className="content",e.appendChild(t),e.appendChild(i),this.windowElement.appendChild(e),this.windowElement.appendChild(n),this.parent?document.getElementById(this.parent).appendChild(this.windowElement):(document.body.appendChild(this.windowElement),this.centerWindow()),"html"===this.type)n.innerHTML=this.html;else if("iframe"===this.type){let s=document.createElement("iframe");s.src=this.url,s.style.width="100%",s.style.height="100%",n.appendChild(s)}}centerWindow(){this.windowElement.style.position="fixed",this.windowElement.style.left="50%",this.windowElement.style.top="50%",this.windowElement.style.transform="translate(-50%, -50%)"}addEventListeners(){let e=this.windowElement.querySelector(".title-bar"),t=this.windowElement.querySelector(".fa-window-minimize"),i=this.windowElement.querySelector(".fa-window-maximize"),n=this.windowElement.querySelector(".fa-xmark");this.windowElement.querySelector(".content");let s=document.createElement("div");s.className="resize-handle";let l=!1;e.addEventListener("mousedown",e=>{this.dragStart(e)}),t.addEventListener("click",()=>{this.windowElement.style.display="none"}),i.addEventListener("click",()=>{l?(this.windowElement.style.width=this.width,this.windowElement.style.height=this.height,this.windowElement.classList.remove("fullscreen"),e.style.cursor="grab",l=!1):(this.windowElement.style.width="100%",this.windowElement.style.height="100%",this.windowElement.classList.add("fullscreen"),e.style.cursor="auto",l=!0)}),n.addEventListener("click",()=>{this.windowElement.remove()}),s.addEventListener("mousedown",e=>{this.resizeStart(e)}),this.windowElement.appendChild(s)}dragStart(e){let t=e.clientX,i=e.clientY,n=this.windowElement.offsetLeft,s=this.windowElement.offsetTop,l=e=>{let l=e.clientX-t,d=e.clientY-i;this.windowElement.style.left=n+l+"px",this.windowElement.style.top=s+d+"px"},d=()=>{window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",d),this.windowElement.style.cursor="grab"};window.addEventListener("mousemove",l),window.addEventListener("mouseup",d),this.windowElement.style.cursor="grabbing"}resizeStart(e){let t=e.clientX,i=e.clientY,n=this.windowElement.offsetWidth,s=this.windowElement.offsetHeight,l=e=>{let l=e.clientX-t,d=e.clientY-i;this.windowElement.style.width=n+l+"px",this.windowElement.style.height=s+d+"px"},d=()=>{window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",d)};window.addEventListener("mousemove",l),window.addEventListener("mouseup",d)}}
