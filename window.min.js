const link=document.createElement("link");link.rel="stylesheet",link.type="text/css",link.href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css",document.head.appendChild(link);const link2=document.createElement("link");link2.rel="preconnect",link2.href="https://fonts.googleapis.com",document.head.appendChild(link2);const link3=document.createElement("link");link3.rel="preconnect",link3.href="https://fonts.gstatic.com",document.head.appendChild(link3);const link4=document.createElement("link");link4.rel="stylesheet",link4.href="https://fonts.googleapis.com/css2?family=Barlow:wght@800&family=Cabin:wght@500&family=Montserrat:wght@600&family=Noto+Sans&family=Poppins&family=Roboto:wght@500&family=Space+Grotesk:wght@700&family=Varela+Round&display=swap",document.head.appendChild(link4);const link5=document.createElement("link");link5.rel="stylesheet",link5.type="text/css",link5.href="https://gitloaf.com/cdn/albibos/carbon-windows/main/window.min.css",document.head.appendChild(link5);class Carbon{constructor(e){this.name=e.name,this.id=e.id,this.type=e.type,this.url=e.url,this.html=e.html,this.width=e.width+"px",this.height=e.height+"px",this.parent=e.parent||null,this.gameid=e.gameid||null,this.server=e.server||"https://raw.githack.com/carbonsystems-dev/gamevault/main/",this.createWindow(),this.addEventListeners()}createWindow(){this.windowElement=document.createElement("div"),this.windowElement.className="window",this.windowElement.style.width=this.width,this.windowElement.style.height=this.height,this.windowElement.id=this.id;let e=document.createElement("div");e.className="title-bar";let t=document.createElement("div");t.className="title",t.innerText=this.name;let i=document.createElement("div");i.className="buttons",i.innerHTML=`
            <i class="fa-regular fa-window-minimize"></i>
            <i class="fa-regular fa-window-maximize"></i>
            <i class="fa-solid fa-xmark"></i>
        `;let s=document.createElement("div");if(s.className="content",e.appendChild(t),e.appendChild(i),this.windowElement.appendChild(e),this.windowElement.appendChild(s),this.parent?document.getElementById(this.parent).appendChild(this.windowElement):(document.body.appendChild(this.windowElement),this.centerWindow()),"html"===this.type)s.innerHTML=this.html;else if("iframe"===this.type){if(this.gameid){let n=document.createElement("iframe");n.src=this.server+this.gameid+"/index.html",n.style.width="100%",n.style.height="100%",s.appendChild(n)}else{let l=document.createElement("iframe");l.src=this.url,l.style.width="100%",l.style.height="100%",s.appendChild(l)}}}centerWindow(){this.windowElement.style.position="fixed",this.windowElement.style.left="50%",this.windowElement.style.top="50%",this.windowElement.style.transform="translate(-50%, -50%)"}addEventListeners(){let e=this.windowElement.querySelector(".title-bar"),t=this.windowElement.querySelector(".fa-window-minimize"),i=this.windowElement.querySelector(".fa-window-maximize"),s=this.windowElement.querySelector(".fa-xmark");this.windowElement.querySelector(".content");let n=!1;e.addEventListener("mousedown",e=>{n||this.dragStart(e)}),t.addEventListener("click",()=>{this.hide()}),i.addEventListener("click",()=>{if(n)this.windowElement.style.width=this.width,this.windowElement.style.height=this.height,this.windowElement.classList.remove("fullscreen"),e.style.cursor="grab",n=!1;else{let t=this.windowElement.style.left,i=this.windowElement.style.top;this.windowElement.style.width="100%",this.windowElement.style.height="100%",this.windowElement.classList.add("fullscreen"),e.style.cursor="auto",n=!0,this.windowElement.style.left="50%",this.windowElement.style.top="50%",this.windowElement.style.transform="translate(-50%, -50%)",this.windowElement.dataset.originalLeft=t,this.windowElement.dataset.originalTop=i}}),s.addEventListener("click",()=>{this.windowElement.remove()}),[{className:"resize-handle top",cursor:"ns-resize",direction:"top",id:"resizeHandleTop"},{className:"resize-handle bottom",cursor:"ns-resize",direction:"bottom",id:"resizeHandleBottom"},{className:"resize-handle left",cursor:"ew-resize",direction:"left",id:"resizeHandleLeft"},{className:"resize-handle right",cursor:"ew-resize",direction:"right",id:"resizeHandleRight"},{className:"resize-handle top-left",cursor:"nwse-resize",direction:"top-left",id:"resizeHandleTopLeft"},{className:"resize-handle top-right",cursor:"nesw-resize",direction:"top-right",id:"resizeHandleTopRight"},{className:"resize-handle bottom-left",cursor:"nesw-resize",direction:"bottom-left",id:"resizeHandleBottomLeft"},{className:"resize-handle bottom-right",cursor:"nwse-resize",direction:"bottom-right",id:"resizeHandleBottomRight"},].forEach(e=>{let t=document.createElement("div");t.className=e.className,t.style.cursor=e.cursor,t.id=e.id,this.windowElement.appendChild(t),t.addEventListener("mousedown",t=>{n||this.resizeStart(t,e.direction)})});let l=document.getElementById("resizeHandleBottom"),o=document.getElementById("resizeHandleLeft"),d=document.getElementById("resizeHandleRight"),r=document.getElementById("resizeHandleTop"),a=document.getElementById("resizeHandleTopLeft"),h=document.getElementById("resizeHandleTopRight"),m=document.getElementById("resizeHandleBottomLeft"),w=document.getElementById("resizeHandleBottomRight");l.addEventListener("mousedown",e=>{n||this.resizeStart(e,"bottom")}),o.addEventListener("mousedown",e=>{n||this.resizeStart(e,"left")}),d.addEventListener("mousedown",e=>{n||this.resizeStart(e,"right")}),r.addEventListener("mousedown",e=>{n||this.resizeStart(e,"top")}),a.addEventListener("mousedown",e=>{n||this.resizeStart(e,"top-left")}),h.addEventListener("mousedown",e=>{n||this.resizeStart(e,"top-right")}),m.addEventListener("mousedown",e=>{n||this.resizeStart(e,"bottom-left")}),w.addEventListener("mousedown",e=>{n||this.resizeStart(e,"bottom-right")})}show(){this.windowElement.style.opacity="1",this.windowElement.style.pointerEvents="auto"}hide(){this.windowElement.style.opacity="0",this.windowElement.style.pointerEvents="none"}fullscreen(){let e=this.windowElement.style.left,t=this.windowElement.style.top;this.windowElement.style.width="100%",this.windowElement.style.height="100%",this.windowElement.classList.add("fullscreen"),titleBar.style.cursor="auto",isMaximized=!0,this.windowElement.style.left="50%",this.windowElement.style.top="50%",this.windowElement.style.transform="translate(-50%, -50%)",this.windowElement.dataset.originalLeft=e,this.windowElement.dataset.originalTop=t}unfullscreen(){this.windowElement.style.width=this.width,this.windowElement.style.height=this.height,this.windowElement.classList.remove("fullscreen"),titleBar.style.cursor="grab",isMaximized=!1}dragStart(e){let t=e.clientX,i=e.clientY,s=this.windowElement.offsetLeft,n=this.windowElement.offsetTop,l=e=>{let l=e.clientX-t,o=e.clientY-i;this.windowElement.style.left=s+l+"px",this.windowElement.style.top=n+o+"px"},o=()=>{window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",o),this.windowElement.style.cursor="grab"};window.addEventListener("mousemove",l),window.addEventListener("mouseup",o),this.windowElement.style.cursor="grabbing"}resizeStart(e,t){let i=e.clientX,s=e.clientY,n=this.windowElement.offsetWidth,l=this.windowElement.offsetHeight,o=e=>{let o=e.clientX-i,d=e.clientY-s,r=n,a=l;t.includes("right")?r=n+o:t.includes("left")&&(r=n-o),t.includes("bottom")?a=l+d:t.includes("top")&&(a=l-d),r=Math.max(r,100),a=Math.max(a,100),this.windowElement.style.width=r+"px",this.windowElement.style.height=a+"px"},d=()=>{window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",d)};window.addEventListener("mousemove",o),window.addEventListener("mouseup",d)}}
